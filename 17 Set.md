# 17. Set

## 0. æœ¬ç« åœ¨æ•´é—¨è¯¾ä¸­çš„åœ°ä½ï¼ˆå…ˆå®šæ€§ï¼‰

**Set è¿™ä¸€ç« ä¸æ˜¯åœ¨æ•™æ–°æ•°æ®ç»“æ„**ï¼Œè€Œæ˜¯åœ¨æ•™ä½ ä¸‰ä»¶æ›´é‡è¦çš„äº‹ï¼š

1. **Set ä½œä¸ºä¸€ç§ Mathematical Abstractionï¼ˆæ•°å­¦æŠ½è±¡ï¼‰**
2. **åŒä¸€ä¸ª ADT å¯ä»¥æœ‰å®Œå…¨ä¸åŒçš„åº•å±‚å®ç°**
3. **â€œå®ç°é€‰æ‹©â€æœ¬èº«æ˜¯ä¸€ç§å·¥ç¨‹å†³ç­–**

> æ‰€ä»¥ï¼š
> 
> 
> **Set = ADT æ€æƒ³çš„é›†ä¸­ä½“ç°**
> 

---

## 1. ä»€ä¹ˆæ˜¯ Setï¼ˆæŠ½è±¡å±‚å®šä¹‰ï¼‰

### 1.1 æ•°å­¦å®šä¹‰ï¼ˆPPT åŸæ„ï¼‰

Set æ˜¯ä¸€ç§é›†åˆï¼Œå…·æœ‰ä»¥ä¸‹æ€§è´¨ï¼š

- **Unordered**ï¼ˆæ— åºï¼‰
- **No duplicates**ï¼ˆå…ƒç´ å”¯ä¸€ï¼‰

ä½ å…³å¿ƒçš„æ˜¯ï¼š

> â€œæŸä¸ªå…ƒç´ åœ¨ä¸åœ¨é›†åˆä¸­â€ï¼Œ
> 
> 
> è€Œä¸æ˜¯å®ƒåœ¨ç¬¬å‡ ä¸ªä½ç½®ã€‚
> 

---

### 1.2 Set çš„åŸºæœ¬æ¥å£ï¼ˆä½å±‚æ“ä½œï¼‰

```cpp
add(value)
remove(value)
contains(value)
clear()
size()
isEmpty()

```

**æ³¨æ„ï¼š**

- æ²¡æœ‰ index
- æ²¡æœ‰ä¸‹æ ‡è®¿é—®
- é¡ºåºä¸æ˜¯ Set çš„æœ¬è´¨å±æ€§

---

## 2. Easy Implementationï¼šç”¨ Map å®ç° Setï¼ˆPPT çš„ç¬¬ä¸€å…³é”®ç‚¹ï¼‰

---

### 2.1 PPT çš„æ ¸å¿ƒæ€æƒ³

> Set å¯ä»¥å»ºç«‹åœ¨ Map ä¹‹ä¸Š
> 

å› ä¸ºï¼š

- Set åªå…³å¿ƒ key
- value æ²¡æœ‰å®é™…æ„ä¹‰

---

### 2.2 å…¸å‹å®ç°æ–¹å¼ï¼ˆå¿…é¡»ç†è§£ï¼‰

```cpp
Map<ValueType,bool> map;

```

å«ä¹‰ï¼š

- key â†’ Set çš„å…ƒç´ 
- value â†’ æ°¸è¿œæ˜¯ trueï¼ˆdummy valueï¼‰

---

### 2.3 å¯¹åº”æ“ä½œçš„æ˜ å°„å…³ç³»

| Set æ“ä½œ | Map æ“ä½œ |
| --- | --- |
| add(x) | map.put(x, true) |
| remove(x) | map.remove(x) |
| contains(x) | map.containsKey(x) |
| size() | map.size() |
| clear() | map.clear() |

ğŸ“Œ **å…³é”®ç†è§£ç‚¹**ï¼š

> Set çš„â€œå”¯ä¸€æ€§â€
> 
> 
> æ˜¯ç”± Map çš„ **key uniqueness** è‡ªåŠ¨ä¿è¯çš„
> 

---

## 3. High-Level Set Operations

PPT æ˜ç¡®è¯´ï¼š

> ä¹‹å‰åªç”¨è¿‡ low-level operationsï¼Œ
> 
> 
> ç°åœ¨è¦å®ç° **æ•°å­¦æ„ä¹‰ä¸Šçš„é›†åˆè¿ç®—**
> 

---

### 3.1 Subsetï¼ˆå­é›†ï¼‰

```cpp
boolisSubsetOf(const Set& set2)const;

```

å®šä¹‰ï¼š

> å¦‚æœæœ¬é›†åˆä¸­çš„ æ¯ä¸€ä¸ªå…ƒç´  éƒ½åœ¨ set2 ä¸­
> 
> 
> â†’ true
> 

å®ç°é€»è¾‘ï¼ˆæ€æƒ³å³å¯ï¼‰ï¼š

- éå† this
- å¯¹æ¯ä¸ªå…ƒç´ è°ƒç”¨ `set2.contains(x)`
- æœ‰ä¸€ä¸ªä¸åœ¨ â†’ false

---

### 3.2 Equalityï¼ˆç›¸ç­‰ï¼‰

```cpp
booloperator==(const Set& set2)const;

```

é€»è¾‘ï¼š

- size ç›¸ç­‰
- this âŠ† set2

ä¸éœ€è¦åŒå‘æ£€æŸ¥ï¼ˆsize å·²ä¿è¯ï¼‰ã€‚

---

### 3.3 Unionï¼ˆå¹¶é›†ï¼‰

```cpp
Setoperator+(const Set& set2)const;

```

è¯­ä¹‰ï¼š

> è¿”å›ä¸€ä¸ªæ–°é›†åˆï¼Œ
> 
> 
> åŒ…å«å‡ºç°åœ¨ **ä»»æ„ä¸€ä¸ªé›†åˆ** ä¸­çš„å…ƒç´ 
> 

å…¸å‹å®ç°ç­–ç•¥ï¼š

1. å¤åˆ¶å½“å‰é›†åˆ
2. æŠŠ set2 ä¸­çš„å…ƒç´ é€ä¸ª add è¿›å»

---

### 3.4 Intersectionï¼ˆäº¤é›†ï¼‰

```cpp
Setoperator*(const Set& set2)const;

```

è¯­ä¹‰ï¼š

> åªä¿ç•™ åŒæ—¶å‡ºç°åœ¨ä¸¤ä¸ªé›†åˆ ä¸­çš„å…ƒç´ 
> 

å®ç°æ€è·¯ï¼š

- éå†è¾ƒå°çš„é›†åˆ
- å¯¹æ¯ä¸ªå…ƒç´ æ£€æŸ¥å¦ä¸€ä¸ªé›†åˆæ˜¯å¦ contains

---

### 3.5 Differenceï¼ˆå·®é›†ï¼ŒPPT éšå«ï¼‰

> åœ¨ set1 ä½†ä¸åœ¨ set2 ä¸­çš„å…ƒç´ 
> 

åŒæ ·æ˜¯éå† + contains çš„ç»„åˆã€‚

---

ğŸ“Œ **éå¸¸é‡è¦çš„æŠ½è±¡ç»“è®ºï¼ˆè€ƒè¯•å¸¸è€ƒï¼‰**ï¼š

> æ‰€æœ‰é«˜å±‚ Set è¿ç®—
> 
> 
> æœ¬è´¨éƒ½æ˜¯ï¼š
> 
> - iteration
> - 
>     - contains

---

## 4. Set çš„å®ç°ç­–ç•¥å¯¹æ¯”ï¼ˆå·¥ç¨‹æ€æƒ³æ ¸å¿ƒï¼‰

PPT ç»™å‡ºä¸¤ç§ä¸»æµå®ç°æ–¹å¼ï¼š

---

### 4.1 Hash-based Setï¼ˆHashSetï¼‰

ç‰¹ç‚¹ï¼š

- add / remove / containsï¼š**O(1) average**
- iterationï¼š**unordered**

ä¼˜ç‚¹ï¼š

- æå¿«
- ç®€å•

ç¼ºç‚¹ï¼š

- æ— æ³•æŒ‰é¡ºåºéå†

---

### 4.2 Tree-based Setï¼ˆBalanced BSTï¼‰

ç‰¹ç‚¹ï¼š

- add / remove / containsï¼š**O(log N)**
- iterationï¼š**ordered**

ä¼˜ç‚¹ï¼š

- æ”¯æŒ sorted iteration

ç¼ºç‚¹ï¼š

- æ¯” HashSet æ…¢

---

### 4.3 STL å¯¹åº”å…³ç³»ï¼ˆè®¤çŸ¥å±‚ï¼‰

| æŠ½è±¡ | STL |
| --- | --- |
| Set | `std::set` |
| HashSet | `std::unordered_set` |

---

ğŸ“Œ **PPT çš„çœŸæ­£é‡ç‚¹ä¸æ˜¯â€œå“ªä¸ªæ›´å¥½â€ï¼Œè€Œæ˜¯ï¼š**

> ä¸åŒéœ€æ±‚ â†’ ä¸åŒå®ç°
> 

---

## 5. Sets and Efficiency

---

### 5.1 ä¸€ä¸ªéå¸¸é‡è¦çš„è§‚ç‚¹

PPT æ˜ç¡®æŒ‡å‡ºï¼š

> æŸäº›ç‰¹å®šç±»å‹çš„ Set
> 
> 
> å¯ä»¥ç”¨ **æ¯” BST å¿«å¾—å¤šçš„ç»“æ„**
> 

---

### 5.2 å…¸å‹ä¾‹å­ï¼šSet<char>

åº”ç”¨åœºæ™¯ï¼š

- delimiter characters
- å­—ç¬¦åˆ†ç±»
- è¯æ³•åˆ†æ

é—®é¢˜ç‰¹å¾ï¼š

- å…ƒç´ èŒƒå›´æå°ï¼ˆASCIIï¼‰
- å¯æšä¸¾
- ä¸Šé™å›ºå®š

---

## 6. Characteristic Vector / Bit Vector

---

### 6.1 æ ¸å¿ƒæ€æƒ³ï¼ˆä¸€å®šè¦ç†è§£ï¼‰

> ç”¨ ä¸€ä¸ª bit è¡¨ç¤ºä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨é›†åˆä¸­
> 
- bit = 1 â†’ åœ¨é›†åˆä¸­
- bit = 0 â†’ ä¸åœ¨é›†åˆä¸­

è¿™å«ï¼š

> Characteristic Vectorï¼ˆæŒ‡æ ‡å‘é‡ï¼‰
> 

---

### 6.2 ä¸ºä»€ä¹ˆæå…¶é«˜æ•ˆ

- contains â†’ O(1)
- add / remove â†’ O(1)
- union / intersection â†’ bitwise æ“ä½œ

ä¸æ˜¯â€œå¾ªç¯åˆ¤æ–­â€ï¼Œè€Œæ˜¯ï¼š

> CPU ä¸€æ¬¡å¤„ç†ä¸€æ•´ä¸² bit
> 

---

### 6.3 ä¸æ•°å­¦ Set è¿ç®—çš„å¯¹åº”å…³ç³»

- `&` â†’ intersection
- `|` â†’ union
- `~` â†’ complementï¼ˆç›¸å¯¹äº universeï¼‰
- `^` â†’ symmetric difference
- Bit vector = fastest Set for small integer domains

---

### 6.4 ä¸ºä»€ä¹ˆåªé€‚åˆâ€œå°æ•´æ•°é›†åˆâ€

é™åˆ¶æ¡ä»¶ï¼š

- å…ƒç´ å¿…é¡»èƒ½æ˜ å°„åˆ° `[0, N)` çš„æ•´æ•°
- N ä¸èƒ½å¤ªå¤§ï¼Œå¦åˆ™ç©ºé—´çˆ†ç‚¸

æ‰€ä»¥å®ƒéå¸¸é€‚åˆï¼š

- char
- small int
- flag sets

---

## 7. ADTï¼ˆæŠ½è±¡æ•°æ®ç±»å‹ï¼‰æ€æƒ³æ€»ç»“ï¼ˆPPT çš„çµé­‚ï¼‰

---

### 7.1 ADT çš„å®šä¹‰

> An Abstract Data Type is defined by its behavior, not its representation.
> 

æ¢å¥è¯è¯´ï¼š

- ä½ **æ€ä¹ˆç”¨å®ƒ**æ¯”å®ƒ**æ€ä¹ˆå­˜**æ›´é‡è¦

---

### 7.2 åŒä¸€ ADTï¼Œå¤šç§å®ç°

| ADT | å®ç° |
| --- | --- |
| Set | Hash table / BST / Bit vector |
| Map | Hashing / BST |
| Sequence | vector / list |

---

### 7.3 PPT ç»™å‡ºçš„å·¥ç¨‹åŸåˆ™ï¼ˆä¼šè€ƒç†è§£é¢˜ï¼‰

- åˆå§‹å®ç°è¦ **simple**
- ä¸è¦è¿‡æ—©ä¼˜åŒ–
- ç”¨æ•°æ®å†³å®šæ˜¯å¦ä¼˜åŒ–

> â€œPremature optimization is the root of all evil.â€
> 

---

## 8. æœŸæœ«é€Ÿè®°æ€»ç»“ï¼ˆé«˜åº¦å‹ç¼©ç‰ˆï¼‰

- Set æ˜¯ unorderedã€no duplicates
- Set å¯ç”¨ Map å®ç°
- é«˜å±‚ Set è¿ç®— = iteration + contains
- HashSetï¼šå¿«ï¼Œä½†æ— åº
- TreeSetï¼šæ…¢ä¸€ç‚¹ï¼Œä½†æœ‰åº
- å°æ•´æ•° Set â†’ Bit vector æœ€ä¼˜
- ADT å¼ºè°ƒè¡Œä¸ºè€Œéè¡¨ç¤º